# COVID-19-Automation-Software-All-In-One
One place to get all you need as a COVID patient. From 'COVID testing &amp; getting reports' to 'Checking authenticity of the Vaccine'- We got you covered. To ensure security, we used the powerful blockchain technology Hyperledger Fabric v2.2.


## Contributors: 

    * Muhid Hassan Risvy                              * Rim Chowdhury
    * Email: hassan.risvy1@gmail.com                  * Email: rimchy32@gmail.com
    * https://github.com/Risvy                        * https://github.com/RimChy  
                                                                            
<!-- <p align="center">
<iframe width="560" height="315" src="https://www.youtube.com/embed/ZD6XLsJf3lw" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</p> -->

### Detailed Project Video:
The detailed video of every feature and how to use it can be found in the following video. Click the thumbnail below:

[![COVID-19-Automation-Software-All-In-One](https://ytimg.googleusercontent.com/vi/ZD6XLsJf3lw/0.jpg)](https://www.youtube.com/watch?v=ZD6XLsJf3lw)


### Why did we do this project? 
As COVID-19 pandemic is having a devastating effects on people's livelihoods and presents an unprecedented challenge to public health, having a single platform to meet all the needs of a COVID patient can really make their life easier. So, an ALL-IN-ONE Covid platform from a patient's perspective is what we are working on.

### A brief description of the features of our project.
#### a) COVID Testing and Getting Report 
Patients can complete their Covid test by simply giving their samples and we will take it from there. By using this application, patients can track the current location of their samples (e.g. "On the way for collection", "Sample Collected", "Report Delivered" and so on). Afterwards, they can collect their report online rather than going to the hostipal. 
#### b) International Travel Test
For someone to travel abroad where they need their covid test done by the last 48 hours, we have a 'International Travel Test' panel to make an urgent test. 

#### c) Admin Panel
We developed the admin panel as well where an admin can manage everything from add/select employees to upload report. 

#### d) Vaccine Authentication & Ensuring Safe Delivery
One can check if they are taking the original vaccine or not by scanning vaccine QR code.

#### e) COVID Prevention & Symptoms
Patients can find about the symptoms and prevention of COVID-19.

#### f) Helpline & Urgent Healthcare Support
Patients can contact to the helpline number which will be sent to their cell phone directly for any urgent support.

### How to use it?
#### i) Home Page: When a user will enter into the project he will see the home page.By clicking Get Started button he/she can go to the risk page.
![home](https://user-images.githubusercontent.com/58721247/145877241-7b2af775-121e-4969-ba66-3fd764f08efd.png)

#### ii) Symptoms and Prevention: Users can find the COVID Symptoms and way of prevention here.
![prevention](https://user-images.githubusercontent.com/58721247/145948816-21d1fdc8-48eb-407a-bd17-725553fdb4cf.png)
![symptom](https://user-images.githubusercontent.com/58721247/145948839-eccaaa1a-4836-462c-922f-3c6aa7153263.png)


#### iii) Risk Measurement: After clicking Get Started button user will be redirected to the page where they can measure the COVID-19 affected risk by filling up the form. A sample example of high risk is shown below.
![Risk](https://user-images.githubusercontent.com/58721247/145878712-dce49d46-6d90-4b70-8b46-059825c77ec6.png)
![Risk_display](https://user-images.githubusercontent.com/58721247/145878731-9b12d45f-4220-4b66-a524-ef7856b13634.png)


#### iv) COVID Test Registration: By clicking New User, patients can register for their COVID test, by giving relevent test information like which test method they want to apply and time slot for their test.
![new_user](https://user-images.githubusercontent.com/58721247/145880236-795e4ca5-583e-4bf1-9478-12b19b7ab2d7.png)

#### v) Already Registered User: For testing COVID for the 2nd time, patients don't need to register again. They can search his NID/Birth Certificate Number and  only need to provide test method and time slot.
![already_registered](https://user-images.githubusercontent.com/58721247/145880606-c405e130-73bb-4324-98b6-36a85e4c5f6f.png)

#### vi) International Travel Test: If a user want to go to foreign country he/she need to get the report within 48hours and need to give passport details. By clicking International Travel Test a user can request for his/her urgent test report. 

![inter](https://user-images.githubusercontent.com/58721247/145881661-525d06f2-4a8b-4540-ba7a-ba414cdcb628.png)

#### vii) Finding Report and Tracking Test History: A user who has done a test can see in which stage his report is now. There are some stages(On the way for collection,Sample Collected,Sent to Lab,Delivered). Once the report is ready, he/she can download it.
![report](https://user-images.githubusercontent.com/58721247/145882747-5dd8c2ed-a41a-4f77-8b46-e1ff8c912b1e.png)
![report-track](https://user-images.githubusercontent.com/58721247/145882762-87ba343e-65cc-40b0-bad8-0ce81a8ab7f6.png)

#### viii) Admin Login and Dashboard: Admin can login using password and username. After login, he will see a dashboard where the notification bell shows how many new test request is submitted. Urgent test request are on the top for international travel test. So from notification bar he can directly assign patients' sample to a employee. From dashboard he can also see total test,how many test are assigned, on the way for collection, sample collected, sent to lab, delivered, total registered patients, total international test requests. Details are shown in the video tutorial.

![dashboard](https://user-images.githubusercontent.com/58721247/145926826-0cc801f5-2872-4f66-b33b-e5af7c0d33c6.png)

#### ix) Take Action By Admin: If the admin wants to change the current report status of a user's report he/she can use the 'Take Action' button and select in which stage the sample is now and give a remark. When delivered, admin will submit a pdf file of user's report. Also the test tracking history can also be seen in from user's 'Find report' option.
![delivered](https://user-images.githubusercontent.com/58721247/145927115-900a770a-06ef-40f2-91be-7cabf734eb42.png)

 
#### x) Adding and Managing Employee: Admin can add a employee's information (id, name, mobile number) and also can update and delete their information. For asssigning any test request to the employee it is important to add some employees first.
![assign](https://user-images.githubusercontent.com/58721247/145927478-42f28650-a811-4050-a1a1-05acf4d72019.png)

#### xi)Vaccine Authenticity: This feature has many sub-feature.
a) Registration: A user can create an account by providing necessary information e.g., name, email address, role, etc about him/her or the organization he/she is representing.
![Register (1)](https://user-images.githubusercontent.com/58721247/145931126-c0378560-c01b-417a-95b2-80609bf7140e.png)

b) Login: A registered user can log into the system by providing an email, password, and role.

c) Adding Information about a vaccine: Only a registered user whose role is Producer can add vaccine information. Say, we tag a vaccine with the number: 10021. 
![Create vaccine info (1)](https://user-images.githubusercontent.com/58721247/145931116-5ac7f75b-9717-49f3-892d-e3c3a1de5478.png)

d) Generating a QR code: A QR code containing the vaccine number will be automatically generated after the vaccine information is added.
![qr code generated (1)](https://user-images.githubusercontent.com/58721247/145931122-51efebe2-494e-45dc-a2bc-772ab669e00f.png)

e) Changing Ownership: A registered user whose role is distributor or producer can change ownership of a vaccine. However, A user cannot change ownership of a vaccine that doesnâ€™t belong to him/her.
![Change ownership (1)](https://user-images.githubusercontent.com/58721247/145931621-21e97fd2-019a-4d72-8b25-3e659a6109f3.png)

f) Scanning QR code: A registered user can upload a QR image to know the QR code content which is the vaccine number.
![scan qr (1)](https://user-images.githubusercontent.com/58721247/145931134-05ed1658-6def-4fbf-b223-c8d54ac83e41.png) 

g) Searching the detailed info: A registered user can search the detailed information of a vaccine after giving the vaccine number. Then the system will show him the full supply chain of that vaccine.
![timeline (1)](https://user-images.githubusercontent.com/58721247/145931151-b9c29894-8b81-4714-851c-8a7ad86ed695.png)

## Installation Instruction:

### Prerequisites
* Xampp
* Git
* Curl
* Docker
* Docker Compose
* Node.js
* Hyperledger Fabric 2.x


## Vaccine Authentication Portal

### Intalling Node.js

Install NVM (Node Version Manager):
```
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.35.3/install.sh | bash
source ~/.bashrc
```

We have used node version 14.15.0. To install v14.15.0:

```
nvm install v14.15.0
nvm use v14.15.0
```

 To install LTS (Long-term support) version of node:
```

nvm install --lts
nvm use --lts
nvm alias default --lts
```


### Installing Git and Curl
```
sudo apt install -y git curl
```

### Installing Docker

(We used docker version 19.03.13. If the current version is not compitable please install docker v19.03.13) 

To download docker, please visit:
https://docs.docker.com/engine/install/ubuntu/



### Installing Docker Compose
To download Docker Compose, please visit:
https://docs.docker.com/compose/install/

### Installing Hyperleger Fabric
To install hyperledger Fabric version 2.2, run the command:
```
cd $HOME
curl -sSL https://raw.githubusercontent.com/hyperledger/fabric/master/scripts/bootstrap.sh | bash -s -- 2.2.3 1.5.0
```

### Setting up Environment Variables

If you have Visual Studio Code installed, open terminal and type:
```
code ~/.bashrc
```
Else
```
nano ~/.bashrc
```
Add the following lines at the end of the script, save, and exit.
```
export PATH=$PATH:$HOME/fabric-samples/bin
export FABRIC_CFG_PATH=$HOME/fabric-samples/config
```

###  Downloading VSN
```
    cd $HOME
    git clone https://github.com/Risvy/VSN-A-Hyperledger-Fabric-Project.git
```
If you are running the project for the first time, you must install all the dependencies. If you not running the project for the first time see the #Optional Part below.

### Move Necessary Files
This is the most important part. We need to move our files from 'VSN-A-Hyperledger-Fabric-Project' to 'fabric-samples' folder.

#PART 1:



After installing Hyperledger Fabric, a folder named "fabric-samples" was created in the 'Home' directory. Inside 'fabric-samples/chaincode/fabcar/javascript/lib', we need to rename the existing chaincode file 'fabcar.js' to something else. 


Simply follow the commands below to rename it to 'old_fabcar.js'.
```
cd ~/fabric-samples/chaincode/fabcar/javascript/lib
mv fabcar.js old_fabcar.js
```
Now go to the directory-> 'HOME/VSN-A-Hyperledger-Fabric-Project/Chaincode- javascript/'

You will find a file named 'fabcar.js'. Copy this file to 'fabric-samples/chaincode/fabcar/javascript/lib' (Where the 'old_fabric.js' file is located). Now inside the lib folder we have 'fabcar.js' and 'old_fabcar.js'.



#PART 2:

Go to the directory -> 'HOME/VSN-A-Hyperledger-Fabric-Project/Api- VSN/'. You should find 3 files: 'public', 'views' and  'app.js'. Copy these 3 files to -> 'HOME/fabric-samples/fabcar/javascript/' (inside the javascript folder).




### Stop Network, Start network, Create Channel and Deploy Chaincode (All in one)

As we are using Javascript, we need to run the command:
```
cd $HOME/fabric-samples/fabcar
sudo ./startFabric.sh javascript
```
If we want to use any other language, we have to replace 'javascript' portion of the command with that language. 

### Installing Libraries For Running The Project
Now, run the following commands: 
```
cd javascript
npm install 
npm i express hbs body-parser async express-session express-validator alert process querystring qrcode jimp qrcode-reader --save 
node enrollAdmin.js 
node registerUser.js
```

### CouchDB UI
You can see the database here <br>
http://localhost:5984/_utils/ <br>
Username:admin<br>
Password:adminpw

After login, go to 'mychannel_fabcar' folder to see the database.

### Run the project
```
node app.js
```
Optional: You can use 'nodemon' instead of 'node'. For that, first install nodemon:
```
npm install -g nodemon

# Now Run:
nodemon app.js
```
Now visit: http://localhost:3000/ 

(If the link doesn't work, try replacing 'http' with 'https').

### Optional

Hope the first time installation was successful.

Now every time we need to run the project, we just have to run the following commands.
```
cd $HOME/fabric-samples/fabcar
./startFabric.sh javascript
cd javascript
npm install 
node enrollAdmin.js 
node registerUser.js
nodemon app.js
```
Now hit the URL: http://localhost:3000/ and we are online!  


P.S: For development purpose, if we make any changes to the chaincode, we have to restart the network and run these commands again.   
 
### Troubleshoot
1. For any kind of permission related problem, act as root user and try again.
```
sudo -i
#Your command
```
2. For API, Javascript or dependency related problem, you can replace the local 'javascript' folder (Directory -> 'HOME/fabric-samples/fabcar/javascript/') with
   <a href="https://drive.google.com/drive/folders/1IqSUmFsQPofiBaHHphKBRQzQSi5svgKe?usp=sharing">this folder!</a> 

3. If the problem persists, replace the whole 'fabric-samples' folder with <a href="https://drive.google.com/drive/folders/135v0JaqAz3M-VWD2h1fYsgadNAOJzPbl?usp=sharing">this folder!</a>.

### Installing Xampp:
To install Xampp please visit https://phoenixnap.com/kb/how-to-install-xampp-on-ubuntu.

### Downloading and Configuring the project:
```
cd $HOME
git clone https://github.com/Risvy/COVID-19-Automation-Software-All-In-One.git
```
After downloading move the db3th folder located in COVID-19-Automation-Software-All-In-One/src folder to /opt/lampp/htdocs directory.
## Start Xampp:
Open your terminal and write this to start your Xampp:
```
cd $HOME
sudo /opt/lampp/lampp start
```
Now open your browser and type http://localhost/dashboard/. Click phpMyAdmin and create a database named covidtesting. After creating database covidtesting import the db.sql file which is located in /opt/lampp/htdocs/db3th/SQL File in covidtesting database. After successful importing you will see tables like the image below:

![Screenshot (174)](https://user-images.githubusercontent.com/58721247/145953951-f03560d7-dcde-4467-8359-bcb7a4cfce75.png)

Now open your browser and type http://localhost//db3th. You will see the home page of this project.








